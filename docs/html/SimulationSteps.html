<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>PLATO Simulator: Simulation Steps</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PLATO Simulator
   &#160;<span id="projectnumber">3.0</span>
   </div>
   <div id="projectbrief">An end-to-end simulator for the Plato mission.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Simulation Steps </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The goal of the PlatoSim C++ code is to model a part (referred to as the "sub-field") of one CCD of a single telescope on the platform. On this page we describe the steps that are executed within a simulation in more detail.</p>
<p>The PlatoSim3 has been rewritten from scratch in order to get rid of historical baggage and inefficient code constructions that had been built up for years. The PlatoSim v2 became impossible to maintain and it was very hard to add new features with confidence.</p>
<p>We therefore started from scratch with an object-oriented design and proper testing. We minimised the dependencies to external libraries and replaced inactive libraries with code that is still actively maintained.</p>
<h2>Conceptual Design</h2>
<p>The PLATO Simulator design started from the concept pictured below (see Fig. 1). The main hardware components that make up the PLATO spacecraft are the platform, telescope, camera, and detectors, all of which are represented by a separate class in PlatoSim3. Since we are simulating noise features on an image taken from the sky, we added the <code>Sky</code> class to the concept. All these components are controlled by a <code>Simulation</code> object.</p>
<div class="image">
<img src="PlatoSim3 Conceptual Design.png" alt="PlatoSim3 Conceptual Design.png"/>
<div class="caption">
Figure 1: Conceptual design of the PLATO Simulator PlatoSim3.</div></div>
<p> The more detailed design of the PlatoSim3 is depicted in Fig. 2. The <code>Simulation</code> class in the middle controls the process and knows about all the main components in the system. Each of these main components has its own set of responsibilities:</p>
<ul>
<li><code>Platform</code> provides information about the jitter,</li>
<li><code>Telescope</code> controls the thermo-elastic drift,</li>
<li><code>Camera</code> provides information on the Point Spread Function (represented by the <code>PSF</code> clas),</li>
<li>and <code>Detector</code> controls all the different (sub-)pixel maps.</li>
</ul>
<p>The blue file icons attached to several boxes indicate that information about its responsibility is provided in the <a class="el" href="InputFileDescription.html">YAML configuration file</a>, while the green file icons indicate that the component is writing information into the <a class="el" href="OutputFileDescription.html">HDF5 output file</a>.</p>
<div class="image">
<img src="PlatoSim3 Detailed Design.png" alt="PlatoSim3 Detailed Design.png"/>
<div class="caption">
Figure 2: Detailed design of the PLATO Simulator PlatoSim3.</div></div>
<h2>Control Flow</h2>
<p>Figure 3 shows the initialisation steps of the PlatoSim3.</p>
<div class="image">
<img src="PlatoSim3 Initialisation.png" alt="PlatoSim3 Initialisation.png"/>
<div class="caption">
Figure 3: Initialisation steps for the PLATO Simulator PlatoSim3.</div></div>
<p> Figure 4 shows the control flow of the PLATO Simulator PlatoSim3.</p>
<p>The simulation is a loop over the number of exposures that is requested in the <a class="el" href="InputFileDescription.html">YAML configuration file</a>. The two main steps in the simulation process are the integration of the light on the detector and the readout process.</p>
<p>The flux of each star in the sub-field is added to the sub-pixel map with the time interval of the pointing jitter and the duration of the exposure time. The background flux is then added and the sub-pixel map is convolved with a rebinned point spread function. After applying the flatfield, the sub-pixel map is rebinned to a pixel map, and the (geometric) vignetting is applied.</p>
<p>During the readout process all the noise features are applied on the pixel map. Many of the features can be switched on or off in the <a class="el" href="InputFileDescription.html">YAML configuration file</a>, some features need to get a value of 1.0 or 0.0 in order to be ignored.</p>
<p>After processing each exposure, the pixel map is written to the <a class="el" href="OutputFileDescription.html">output HDF5 file</a> and the option to write also the sub-pixel maps can be enabled in the <a class="el" href="InputFileDescription.html">YAML configuration file</a>. Details about detected stars, their positions, and the pointing information is finally written to the <a class="el" href="OutputFileDescription.html">output HDF5 file</a>.</p>
<div class="image">
<img src="PlatoSim3 Control Flow.png" alt="PlatoSim3 Control Flow.png"/>
<div class="caption">
Figure 4: Control Flow for the PLATO Simulator PlatoSim3.</div></div>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
