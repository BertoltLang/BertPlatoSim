<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>PLATO Simulator: &lt;!-- Documentation for the PLATO Simulator --&gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PLATO Simulator
   &#160;<span id="projectnumber">3.0</span>
   </div>
   <div id="projectbrief">An end-to-end simulator for the Plato mission.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title"></div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="welcome"></a>Welcome to the PLATO Simulator Pages</h2>
<p>The PLATO Simulator is an end-to-end software tool, designed to perform realistic simulations of the expected observations of the PLATO mission. It can, however, easily be adapted to similar types of missions.</p>
<p>Our simulator models and simulates time series of CCD images by including models of the CCD and its electronics, the telescope optics, the stellar field, the jitter movements of the spacecraft, and all important natural sources of noise.</p>
<p>Many aspects concerning the design trade-off of a space-based instrument and its performance can best be tackled through realistic simulations of the expected observations. The complex interplay of various noise sources in the course of the observations make such simulations an indispensable part of the assessment and design study of any space-based mission.</p>
<h2><a class="anchor" id="installation"></a>Installation</h2>
<p>The PlatoSim3 software is being distributed via <a href="https://github.com/">GitHub</a>, so you'll be needing a (free) <a href="https://github.com/join">GitHub account</a>. As the <a href="https://github.com/IvS-KULeuven/PlatoSim3">PlatoSim3 repository</a> is kept private for now, access must be granted by the PlatoSim3 team explicitly.</p>
<p>PlatoSim3 has been tested on recent Mac OS X and recent Linux (Fedora, Ubuntu, Debian) systems. We cannot support Windows systems at the moment, so we advise Windows users to install a Virtual Machine (VM), and run the PLATO Simulator inside the VM.</p>
<h3><a class="anchor" id="retrieve&update"></a>Retrieving &amp; Updating the Software</h3>
<p>To download the software, go to the <a href="https://github.com/IvS-KULeuven/PlatoSim3">PlatoSim3 repository on GitHub</a>. The GitHub web interface to download the PlatoSim3 software is shown in Fig. 1.</p>
<p>If you are interested in contributing to the software, you must <code>fork</code> PlatoSim3, using the GitHub web interface. Just press the <code>"Fork"</code> button and follow the instructions.</p>
<p>Although GitHub allows downloading the code as a ZIP file (by pressing the <code>"Download ZIP"</code> button in the GitHub web interface), we strongly discourage this, as this makes the process of updating to a more recent version of the software more complex and tedious.</p>
<p>If you want to be able to update the software (without having to re-install the <a href="#dependencies">dependencies</a> each time), it is better to <code>clone</code> PlatoSim3 by executing the following command in a designated directory (you have to do this only once!):</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;git clone https://github.com/IvS-KULeuven/PlatoSim3.git .</div></div><!-- fragment --><p>Mind the dot at the end of the command!</p>
<p>You can then update the software by executing the command</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;git pull origin master </div></div><!-- fragment --><p>in the directory in which you installed PlatoSim3.</p>
<p>However, this will only work smoothly if you did not change any of the PlatoSim3 files or added files to the PlatoSim3 folders. The only exceptions are the <code>/inputfiles</code> and the <code>/build</code> folder, where you can add files. Please, do not modify the original files in the <code>/inputfiles</code> folder, as this might cause problems when updating the software. We recommend that you copy the <code>inputfile.yaml</code> file and modify the copy rather than the original file.</p>
<p>At a later stage, releases will be distributed. We will then extend the documentation accordingly.</p>
<p>Please note that you have to re-build the code each time you fetch software changes. How to do this is explained <a href="#build&amp;install">here</a>.</p>
<div class="image">
<img src="gitHub.png" alt="gitHub.png"/>
<div class="caption">
Figure 1: Screenshot of the GitHub web interface.</div></div>
<p> After you have downloaded the PlatoSim3 code, you first have to install a few packages (so-called <a href="#dependencies">dependencies</a>) before you can actually build and run the PLATO Simulator. The next sub-sections describe the <a href="#requirements">requirements</a>, and the procedures to install the <a href="#dependencies">dependencies</a> and to <a href="#build&amp;install">build</a> the PlatoSim3 code.</p>
<h3><a class="anchor" id="requirements"></a>Requirements</h3>
<p>To be able to install the dependencies and build the code, the following software must be installed on your computer:</p>
<ul>
<li>Python: for the installation of the dependencies</li>
<li><a href="https://gcc.gnu.org/">gcc</a> v5.1 or more recent, or <a href="http://clang.llvm.org/">clang</a> v3.3 or more recent</li>
<li><a href="https://cmake.org/">CMake</a>: cross-platform open-source build system to control the software compilation process (using simple platform and compiler independent configuration files)</li>
<li><a href="http://www.openblas.net">BLAS</a> and <a href="http://www.netlib.org/lapack/">LAPACK</a>. Without these, the simulator will likely be slower. These libraries come pre-installed on Mac OS X (so Mac users do not have to do anything). Many Linux distributions also standardly have these libraries installed or offer a package manager to easily install them.</li>
</ul>
<p>It is also possible to run the PLATO Simulator from within Python. We recommend downloading a Python distribution such as <a href="https://docs.continuum.io/anaconda/install">Anaconda</a>. More information on setting up your Python distribution and scripting PlatoSim3 using Python can be found <a class="el" href="ScriptingInPython.html">here</a>.</p>
<h3><a class="anchor" id="dependencies"></a>Dependencies</h3>
<p>PlatoSim3 relies on a number of other packages, which are all included in the PlatoSim3 distribution for your convenience. Everything concerning the dependencies can be found in the <code>/dependencies</code> directory. The <code>/dependencyDownloads</code> sub-directory contains the tarball or zipball file of all required packages. In the <code>/installscripts</code> sub-directory you can find Python scripts that help you to unzip or untar these files into the <code>/dependencyInstalls</code> directory. You can do this for one dependency at a time, like this (in the directory in which PlatoSim3 was downloaded):</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;python ./dependencies/installscripts/install_hdf5.py</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;python ./dependencies/installscripts/install_googletest.py</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;python ./dependencies/installscripts/install_yaml.py</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;python ./dependencies/installscripts/install_armadillo.py</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;python ./dependencies/installscripts/install_fftw.py</div></div><!-- fragment --><p>Alternatively, you can also install the required dependencies and build the code in one go by typing (also in the directory in which PlatoSim3 was downloaded):</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;./install.sh</div></div><!-- fragment --><p>If problems would arise when executing this command, it may be useful to tried to install the dependencies one-by-one to pinpoint the problem.</p>
<h3><a class="anchor" id="build&install"></a>Build &amp; Install</h3>
<p>The first time you want to run the PLATO Simulator or each time you changed something in the code, the software must be built again. Just <code>cd</code> to the <code>/build</code> directory (the first time you will have to create this directory yourself) and type the following commands (after emptying the <code>/build</code> directory):</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;cmake ..</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;(make clean)</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;make -j 4</div></div><!-- fragment --><p>This will create two executables :</p><ul>
<li><code>platosim</code> to run simulations (see below)</li>
<li>and <code>testplatosim</code> to run the test harnesses (without arguments).</li>
</ul>
<h2><a class="anchor" id="beforeRunningPlatoSim3"></a>Before Running PlatoSim3</h2>
<p>After the installation of the software, the PLATO Simulator can be run from the <code>/build</code> directory you have created, but first you have to set a couple of environment variables</p>
<h3><a class="anchor" id="environmentVariables"></a>Setting up your Environment Variables</h3>
<p>To avoid having to hardcode any path in configuration files, tutorials, etc., you must export three environment variables:</p>
<ul>
<li><code>PLATO_PROJECT_HOME</code>: to refer to the directory in which PlatoSim3 was installed,</li>
<li><code>PLATO_WORKDIR</code>: to refer to the directory you want to write output or in which you want to store your own configuration files (preferably not within <code>/PlatoSim3</code>),</li>
<li>and <code>PYTHONPATH</code>: to refer to the directory in which our Python scripts can be found.</li>
</ul>
<p>This can be done as follows:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;PLATO_PROJECT_HOME=&lt;full path to /PlatoSim3&gt;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;export PLATO_PROJECT_HOME</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;PLATO_WORKDIR=&lt;full path to a preferred working directory&gt;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;export PLATO_WORKDIR</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;PYTHONPATH=$PYTHONPATH:&lt;full path to /PlatoSim3/python&gt;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;export PYTHONPATH</div></div><!-- fragment --><p>If you want, you can copy this code to make your own little script to set up your environment (e.g. <code>setPlatoEnvironment</code>), or add it to your <code>.bash_profile</code>.</p>
<p>To check the content of these variables (to see whether they are set to the proper location), type</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;echo $PLATO_PROJECT_HOME</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;echo $PLATO_WORKDIR</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;echo $PYTHONPATH</div></div><!-- fragment --><h3><a class="anchor" id="yourOwnFiles"></a>Where to Store your own Files?</h3>
<p>To avoid problems when updating the PlatoSim3 software, it is best to store your own input and output files in a designated working directory, (preferably) outside the installation directory of PlatoSim3. You can (but should not) add your input files to the <code>/inputfiles</code> directory, but under no circumstances change the original files in that directory!</p>
<p>The path to the designated working directory must be exported as the <code>PLATO_WORKDIR</code> environment variable, as described above.</p>
<h2><a class="anchor" id="runningPlatoSim3"></a>Run PlatoSim3</h2>
<p>For the simulation itself, only one input file with configuration parameters (e.g. <code>/inputfiles/inputfile.yaml</code>) is required as input.</p>
<p>To initiate a simulation, <code>cd</code> to the <code>/build</code> directory and type:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;./platosim &lt;input file&gt; &lt;non-existing output file&gt; [&lt;log file&gt;]</div></div><!-- fragment --><p>The structure of the input file and the meaning of the individual configuration parameters are described <a class="el" href="InputFileDescription.html">here</a>.</p>
<p>Note that - before running PlatoSim3 - you must have an environment variable <code>PLATO_PROJECT_HOME</code>, set to the base folder of PlatoSim3.</p>
<p>If you want to use realistic PSF models instead of a Gaussian, you can download these from <a href="ftp://plato:miSotalP@ftp.ster.kuleuven.be/psf.hdf5
">our FTP server</a>. A convenient place to store this file is in the <code>/inputfiles</code> directory.</p>
<h3><a class="anchor" id="output"></a>Output</h3>
<p>The output of the simulations with PlatoSim3 is stored as an HDF5 file. The structure of such files and how to access (and visualise) the content is described <a class="el" href="OutputFileDescription.html">here</a>.</p>
<p>Note that the x-axis is defined along the serial readout register and corresponds to the columns of the detector (and therefore of the pixel and sub-pixel map). The y-axis corresponds to the rows of the detector (and therefore of the pixel and sub-pixel map). In Python, for example, the <code>imshow()</code> method of <code>matplotlib</code> transposes the image as it tries to mimic Matlab.</p>
<p>The <code>Armadillo</code> arrays (that are used internally to store the maps) are column-major rather than row-major.</p>
<h2><a class="anchor" id="inCaseOfProblems"></a>In Case of Problems</h2>
<p>In case you would come across problems you cannot solve yourself, please, let us know! We would like you to use the issue tracking on GitHub rather than sending an email to the developers, as this helps to better keep track of the issues and their status. How raise issues (and which information you must provide us with) is desribed <a class="el" href="IssueTracking.html">here</a>.</p>
<h2><a class="anchor" id="reference"></a>Reference</h2>
<p>We kindly ask you to refer to <a href="http://arxiv.org/abs/1404.1886">this work</a> in any publication the PLATO Simulator software contributes to. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
